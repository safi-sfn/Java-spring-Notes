# JPA @Column Annotation - Complete Guide üìö‚ú®

> **Bhai log, JPA mein database mapping ka superhero hai ye @Column annotation!** ü¶∏‚Äç‚ôÇÔ∏è

---

## 1. Introduction with Confusion Clearing ü§î‚û°Ô∏èüòé

### Simple Explanation First 
**@Column annotation ka simple matlab hai:** Database table ke columns ko customize karna! üí™

Real-life mein aise samjho - **Tumhara naam "Rohit Kumar" hai, lekin school register mein "R_Kumar" likha hai.** Similarly, Java field ka naam `name` hai but database column ka naam `product_name` ho sakta hai!

### Technical Definition üéØ
@Column annotation JPA entity fields ko customize karne ke liye use hota hai - jaise name, length, nullable etc. database table columns ke liye mapping.

---

## 2. Key Terms/Concepts üìñ

| Term | English Explanation |
|------|-------------------|
| **Entity** | Java class representing database table |
| **Field**  | Variable inside Java class |
| **Column** | Database table column |
| **Mapping** | Connecting Java field to DB column |
| **Annotation** | Special marker (@) for configuration |

### Visual Representation üé®
```
Java Entity Field     ‚Üí     Database Column
     ‚Üì                           ‚Üì
   @Column                  Customized
Configuration              Properties
```

---

## 3. Detailed Examples üíª

### Example 1: Default Mapping (Bina @Column ke) ‚úÖ

```java
import jakarta.persistence.Entity;
import jakarta.persistence.Id;

@Entity
public class Product {
    @Id
    private Long id;
    private String name;    // Column name: "name"
    private double price;   // Column name: "price"
    
    // Getters and Setters
    public String getName() { return name; }
    public void setName(String name) { this.name = name; }
    public double getPrice() { return price; }
    public void setPrice(double price) { this.price = price; }
}
```

**Generated SQL:**
```sql
CREATE TABLE product (
    id BIGINT PRIMARY KEY,
    name VARCHAR(255),
    price DOUBLE
);
```

### Example 2: Custom Mapping with @Column üéØ

```java
import jakarta.persistence.*;
import java.math.BigDecimal;

@Entity
@Table(name = "products")
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "product_name", length = 100, nullable = false, unique = true)
    private String name;
    
    @Column(name = "product_price", precision = 10, scale = 2)
    private BigDecimal price;
    
    @Column(name = "description", length = 500)
    private String description;
    
    // Getters and Setters
}
```

**Generated SQL:**
```sql
CREATE TABLE products (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    product_name VARCHAR(100) NOT NULL UNIQUE,
    product_price DECIMAL(10,2),
    description VARCHAR(500)
);
```

**Output Example:**
```
When you save: Product(name="iPhone 15", price=79999.99)
Database stores: product_name="iPhone 15", product_price=79999.99
```

### Example 3: Employee Entity with All Attributes üè¢

```java
import jakarta.persistence.*;
import java.math.BigDecimal;
import java.sql.Timestamp;

@Entity
@Table(name = "employees")
public class Employee {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "full_name", nullable = false, length = 100)
    private String name;
    
    @Column(name = "email", unique = true, nullable = false)
    private String email;
    
    @Column(name = "salary", precision = 10, scale = 2)
    private BigDecimal salary;
    
    @Column(name = "created_at", 
            insertable = false, 
            updatable = false, 
            columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
    private Timestamp createdAt;
    
    // Constructor
    public Employee(String name, String email, BigDecimal salary) {
        this.name = name;
        this.email = email;
        this.salary = salary;
    }
    
    // Getters and Setters
}
```

**Step-by-step Explanation:**
1. **`name = "full_name"`** ‚Üí Field `name` maps to column `full_name`
2. **`nullable = false`** ‚Üí Column cannot be NULL (required field)
3. **`length = 100`** ‚Üí Maximum 100 characters allowed
4. **`unique = true`** ‚Üí No duplicate emails allowed
5. **`precision = 10, scale = 2`** ‚Üí Max 10 digits, 2 after decimal
6. **`insertable = false, updatable = false`** ‚Üí Cannot modify `created_at`

---

## 4. Rules/Guidelines üìã

### Rule 1: Column Naming ‚úÖ
**‡§∏‡§π‡•Ä ‡§§‡§∞‡•Ä‡§ï‡§æ:**
```java
@Column(name = "user_name")  // Snake case for DB
private String userName;      // Camel case for Java
```

**‡§ó‡§≤‡§§ ‡§§‡§∞‡•Ä‡§ï‡§æ:** ‚ùå
```java
@Column(name = "userName")   // Camel case in DB (avoid)
private String userName;
```

### Rule 2: String Length Specification ‚úÖ
**‡§∏‡§π‡•Ä ‡§§‡§∞‡•Ä‡§ï‡§æ:**
```java
@Column(name = "description", length = 1000)
private String description;  // Explicitly set length
```

**‡§ó‡§≤‡§§ ‡§§‡§∞‡•Ä‡§ï‡§æ:** ‚ùå
```java
@Column(name = "description")
private String description;  // Default 255 might be insufficient
```

### Rule 3: Nullable Constraints ‚úÖ
**‡§∏‡§π‡•Ä ‡§§‡§∞‡•Ä‡§ï‡§æ:**
```java
@Column(nullable = false)    // Required field
private String email;

@Column(nullable = true)     // Optional field (default)
private String phone;
```

### Rule 4: Decimal Precision ‚úÖ
**‡§∏‡§π‡•Ä ‡§§‡§∞‡•Ä‡§ï‡§æ:**
```java
@Column(precision = 10, scale = 2)  // 99999999.99 max
private BigDecimal price;
```

**‡§ó‡§≤‡§§ ‡§§‡§∞‡•Ä‡§ï‡§æ:** ‚ùå
```java
@Column  // No precision = data loss possible
private BigDecimal price;
```

**Error Example:**
```
Error: Data truncation: Out of range value for column 'price'
```

---

## 5. Real-world Applications üåç

### Banking System Example üè¶
```java
@Entity
@Table(name = "bank_accounts")
public class BankAccount {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "account_number", unique = true, nullable = false, length = 12)
    private String accountNumber;  // Unique account number
    
    @Column(name = "account_holder_name", nullable = false, length = 100)
    private String holderName;
    
    @Column(name = "balance", precision = 15, scale = 2, nullable = false)
    private BigDecimal balance;  // Up to 15 digits, 2 decimal places
    
    @Column(name = "account_type", length = 20, nullable = false)
    private String accountType;  // SAVINGS, CURRENT, etc.
    
    @Column(name = "created_date", 
            insertable = false, 
            updatable = false,
            columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
    private Timestamp createdDate;
}
```

### E-commerce Product Example üõí
```java
@Entity
@Table(name = "products")
public class Product {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long productId;
    
    @Column(name = "product_code", unique = true, nullable = false, length = 10)
    private String productCode;  // SKU code
    
    @Column(name = "product_name", nullable = false, length = 200)
    private String name;
    
    @Column(name = "price", precision = 10, scale = 2, nullable = false)
    private BigDecimal price;
    
    @Column(name = "discount_percentage", precision = 5, scale = 2)
    private BigDecimal discountPercentage;  // 0.00 to 100.00
    
    @Column(name = "stock_quantity", nullable = false)
    private Integer stockQuantity;
    
    @Column(name = "description", length = 2000)
    private String description;
    
    @Column(name = "is_active", nullable = false, columnDefinition = "BOOLEAN DEFAULT TRUE")
    private Boolean isActive;
}
```

---

## 6. Comparison Tables üìä

### @Column vs @Table Comparison

| Feature | @Column | @Table |
|---------|---------|---------|
| **Purpose** | Individual column customization | Entire table customization |
| **Applies To** | Fields/Properties | Entity class |
| **Scope** | Single column | Complete table |
| **Usage** | `@Column(name = "user_name")` | `@Table(name = "users")` |
| **Common Use** | Column naming, constraints | Table naming, schema |

### @Column Attributes Comparison

| Attribute | Default Value | Purpose | Example |
|-----------|---------------|---------|---------|
| `name` | Field name | Custom column name | `name = "user_name"` |
| `nullable` | `true` | Allow NULL values | `nullable = false` |
| `unique` | `false` | Unique constraint | `unique = true` |
| `length` | `255` | String column length | `length = 100` |
| `precision` | `0` | Total digits (decimals) | `precision = 10` |
| `scale` | `0` | Decimal places | `scale = 2` |
| `insertable` | `true` | Include in INSERT | `insertable = false` |
| `updatable` | `true` | Include in UPDATE | `updatable = false` |

---

## 7. Interview Questions üé§

### Q1: What is @Column annotation and when do you use it?
**Answer:** 
@Column annotation is used to customize JPA entity field mapping to database columns, including properties like name, length, nullable constraints etc. Use it when:
- You need custom column names
- Want to set constraints (nullable, unique)
- Need to specify length or precision
- Default mapping doesn't meet requirements

**Code Example:**
```java
@Column(name = "customer_email", unique = true, nullable = false)
private String email;  // Custom name + constraints
```

### Q2: Difference between precision and scale in @Column?
**Answer:** 
- **Precision:** Total number of digits
- **Scale:** Number of digits after decimal point

```java
@Column(precision = 8, scale = 2)
private BigDecimal price;  // Max: 999999.99 (8 total, 2 after decimal)
```

### Q3: What happens if you don't use @Column?
**Answer:** 
JPA uses default mapping:
- Field name becomes column name
- Default constraints apply (nullable = true, length = 255)
- No custom configurations

```java
// Without @Column
private String name;  // Column: "name", VARCHAR(255), nullable

// With @Column  
@Column(name = "full_name", length = 100, nullable = false)
private String name;  // Column: "full_name", VARCHAR(100), NOT NULL
```

### Q4: Tricky Scenario - insertable and updatable
**Question:** What's the use of `insertable = false` and `updatable = false`?

**Answer:**
Used for read-only columns or columns managed by database:

```java
@Column(name = "created_at", 
        insertable = false, 
        updatable = false,
        columnDefinition = "TIMESTAMP DEFAULT CURRENT_TIMESTAMP")
private Timestamp createdAt;

// JPA will:
// ‚úÖ Read the value from database
// ‚ùå Not include in INSERT statements
// ‚ùå Not include in UPDATE statements
```

---

## 8. Common Mistakes üö´

### Mistake 1: Not Setting Length for Long Strings ‚ùå
```java
// WRONG - Will truncate at 255 characters
@Column
private String longDescription;  // Default length = 255
```

**Why it's wrong:** Description might be longer than 255 characters
**Error:** `Data truncation: Data too long for column`

**Correct Approach:** ‚úÖ
```java
@Column(length = 2000)
private String longDescription;  // Can store up to 2000 chars
```

### Mistake 2: Using double for Money ‚ùå
```java
// WRONG - Precision issues with money
@Column(precision = 10, scale = 2)
private double price;  // Floating point errors
```

**Correct Approach:** ‚úÖ
```java
@Column(precision = 10, scale = 2)
private BigDecimal price;  // Exact decimal arithmetic
```

### Mistake 3: Forgetting Unique Constraints ‚ùå
```java
// WRONG - Allows duplicate emails
@Column(nullable = false)
private String email;
```

**Correct Approach:** ‚úÖ
```java
@Column(nullable = false, unique = true)
private String email;  // No duplicate emails
```

### Mistake 4: Wrong Column Definition ‚ùå
```java
// WRONG - Invalid SQL syntax
@Column(columnDefinition = "VARCHAR(100) NOT NULL DEFAULT 'Unknown'")
private String name;  // String default in wrong quotes
```

**Correct Approach:** ‚úÖ
```java
@Column(columnDefinition = "VARCHAR(100) DEFAULT 'Unknown'")
private String name;  // Proper SQL syntax
```

---

## 9. Best Practices üèÜ

### 1. Use Consistent Naming Convention üìù
```java
// Database: snake_case
// Java: camelCase
@Column(name = "first_name")
private String firstName;

@Column(name = "last_login_time")  
private LocalDateTime lastLoginTime;
```

### 2. Always Set Length for Strings üìè
```java
@Column(name = "title", length = 200)      // Article titles
private String title;

@Column(name = "content", length = 5000)   // Article content  
private String content;

@Column(name = "slug", length = 100)       // URL slugs
private String slug;
```

### 3. Use Appropriate Data Types üî¢
```java
// For money - use BigDecimal
@Column(name = "price", precision = 10, scale = 2)
private BigDecimal price;

// For percentages
@Column(name = "tax_rate", precision = 5, scale = 4)  // 99.9999% max
private BigDecimal taxRate;

// For boolean flags
@Column(name = "is_active", nullable = false, columnDefinition = "BOOLEAN DEFAULT TRUE")
private Boolean isActive;
```

### 4. Optimize Database Performance üöÄ
```java
// Index commonly searched fields
@Column(name = "email", unique = true, nullable = false)
@Index(name = "idx_user_email")  // Add index for faster searches
private String email;

// Use appropriate lengths (don't over-allocate)
@Column(name = "country_code", length = 2)  // ISO country codes
private String countryCode;
```

### 5. Document Complex Column Definitions üìö
```java
/**
 * Account balance with precision up to 10 digits
 * and 2 decimal places (max: 99999999.99)
 */
@Column(name = "account_balance", 
        precision = 10, 
        scale = 2, 
        nullable = false)
private BigDecimal accountBalance;
```

---

## 10. Summary/Quick Recap üéØ

### Key Takeaways üí°
1. **@Column** = Database column customization ka superhero! ü¶∏‚Äç‚ôÇÔ∏è
2. **Default behavior** = Field name ‚Üí Column name mapping
3. **Custom behavior** = Use @Column attributes for fine control
4. **Money fields** = Always use BigDecimal with precision/scale
5. **String fields** = Set appropriate length
6. **Required fields** = Use nullable = false

### Memory Tricks üß†
- **"Column ki Column"** - @Column annotation column ko customize karta hai
- **"Precision Scale Rule"** - Precision = total digits, Scale = after decimal
- **"Nullable Nahi, Required Hai"** - nullable = false for required fields
- **"BigDecimal Big Money"** - Money ke liye BigDecimal use karo

### When to Use What ü§î

| Scenario | Use This | Example |
|----------|----------|---------|
| Custom column name | `name = "custom_name"` | Database naming convention |
| Required field | `nullable = false` | Email, name fields |
| Unique field | `unique = true` | Email, username |
| Long text | `length = 2000` | Descriptions, comments |
| Money/Decimal | `precision = 10, scale = 2` | Prices, balances |
| Read-only | `insertable/updatable = false` | Timestamps, IDs |

### Yaad Rakhne Ka Mantra üìø
```
@Column annotation = Database customization
name = Column name change
nullable = Required ya Optional  
unique = Duplicate allowed nahi
length = String ki maximum limit
precision/scale = Decimal ka size
```

---

## üéâ Congratulations Bhai! 
**Ab tumhe JPA @Column annotation ki complete knowledge hai!** 

Practice karte raho, real projects mein implement karo, aur interview mein confidence se answer do! üí™

**Happy Coding! üöÄüíª**

---

*Notes banaye gaye hai love aur mehnat se by your coding companion! ‚ù§Ô∏è*
