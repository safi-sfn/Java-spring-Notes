# üöÄ Spring Boot Configuration Files - application.properties & application.yml

## 1. Introduction - Confusion Clear Karte Hain! ü§î

### Simple Explanation First üí°
**Bhai, simple words mein** - Ye dono files tumhare Spring Boot application ki **settings** store karte hain. Jaise tumhare phone mein WiFi password, brightness level, ringtone save hota hai, waise hi ye files mein database connection, server port, logging level wagairah save hota hai!

### Real-life Analogy üè†
**Ghar ka example leta hun yaar:**
- `application.properties` = Tumhare ghar ki **settings list** (English mein likha gaya)
  - "Kitchen light = ON"
  - "AC temperature = 22"
  - "WiFi password = mypassword123"

- `application.yml` = Same settings but **family tree** ki tarah organized
  ```
  Ghar:
    Kitchen:
      light: ON
    Living Room:
      AC:
        temperature: 22
    WiFi:
      password: mypassword123
  ```

### Technical Definition üìö
**Configuration files** hain jo Spring Boot application ke **runtime behavior** ko control karte hain. Ye external configuration provide karte hain without code changes ke.

---

## 2. Key Terms/Concepts üîë

| Term | Meaning | Example |
|------|---------|---------|
| **Property** | Key-value pair | `server.port=8080` |
| **Profile** | Environment-specific config | `dev`, `prod`, `test` |
| **Placeholder** | Dynamic value reference | `${app.name}` |
| **YAML** | Human-readable data format | Uses indentation |
| **Hierarchy** | Nested properties | `spring.datasource.url` |

### Visual Representation üìä
```
Application Startup
        ‚¨áÔ∏è
Configuration Loading
        ‚¨áÔ∏è
    Properties/YAML
        ‚¨áÔ∏è
Spring Environment
        ‚¨áÔ∏è
    Bean Creation
```

---

## 3. Detailed Examples üíª

### üìÑ application.properties Format

```properties
# Server Configuration
server.port=8080
server.servlet.context-path=/api

# Database Configuration
spring.datasource.url=jdbc:mysql://localhost:3306/mydb
spring.datasource.username=root
spring.datasource.password=password123
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Logging Configuration
logging.level.com.example=DEBUG
logging.level.org.springframework=INFO
logging.file.name=application.log

# Custom Application Properties
app.name=MyAwesomeApp
app.version=1.0.0
app.author=Rahul Bhai
```

**Expected Output Console mein:**
```
2024-03-15 10:30:25 INFO  - Started MyAwesomeApp on port 8080
2024-03-15 10:30:25 DEBUG - Database connection established
2024-03-15 10:30:25 INFO  - Context path set to /api
```

### üìÑ application.yml Format

```yaml
# Server Configuration
server:
  port: 8080
  servlet:
    context-path: /api

# Database Configuration  
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/mydb
    username: root
    password: password123
    driver-class-name: com.mysql.cj.jdbc.Driver
  
  # JPA Configuration
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

# Logging Configuration
logging:
  level:
    com.example: DEBUG
    org.springframework: INFO
  file:
    name: application.log

# Custom Application Properties
app:
  name: MyAwesomeApp
  version: 1.0.0
  author: Rahul Bhai
```

### Step-by-step Configuration Loading üîÑ

```java
// 1. Spring Boot automatically loads these files
@SpringBootApplication
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
        // Auto-loading sequence:
        // 1. application.properties/yml from classpath
        // 2. Profile-specific files
        // 3. Command line arguments
        // 4. Environment variables
    }
}

// 2. Access properties in your code
@Component
public class AppConfig {
    
    @Value("${app.name}")
    private String appName;
    
    @Value("${server.port}")
    private int serverPort;
    
    public void displayConfig() {
        System.out.println("App Name: " + appName);
        System.out.println("Server Port: " + serverPort);
    }
}
```

---

## 4. Rules/Guidelines üìè

### ‚úÖ Properties File Rules

1. **Key-Value Format** ‚úÖ
   ```properties
   # Correct
   database.name=myapp
   server.port=8080
   ```

2. **No Spaces Around Equals** ‚úÖ
   ```properties
   # Correct
   app.name=MyApp
   
   # Wrong ‚ùå
   app.name = MyApp
   ```

3. **Comments with #** ‚úÖ
   ```properties
   # This is a comment
   app.version=1.0.0
   ```

### ‚úÖ YAML File Rules

1. **Indentation Matters** (2 spaces recommended) ‚úÖ
   ```yaml
   # Correct
   spring:
     datasource:
       url: jdbc:mysql://localhost:3306/mydb
   
   # Wrong ‚ùå (4 spaces inconsistent)
   spring:
       datasource:
           url: jdbc:mysql://localhost:3306/mydb
   ```

2. **Colon Space Format** ‚úÖ
   ```yaml
   # Correct
   server:
     port: 8080
   
   # Wrong ‚ùå
   server:
     port:8080
   ```

3. **List Format** ‚úÖ
   ```yaml
   # Correct
   spring:
     profiles:
       active:
         - dev
         - debug
   
   # Or
   spring.profiles.active: dev,debug
   ```

### ‚ùå Common Errors with Messages

```bash
# YAML Indentation Error
Error: while parsing a block mapping
  in 'reader', line 3, column 1:
    datasource:
    ^
expected <block end>, but found '<block mapping start>'

# Properties Invalid Character Error  
Error: Invalid character '=' in property name 'server port'
Line: server port=8080
```

---

## 5. Real-world Applications üåç

### üè¶ Banking Application Configuration

```yaml
# application-prod.yml
banking:
  app:
    name: "HDFC Mobile Banking"
    version: "3.2.1"
  
  security:
    jwt:
      secret: ${JWT_SECRET:defaultSecret}
      expiration: 3600000  # 1 hour
    
  transaction:
    daily-limit: 100000
    per-transaction-limit: 50000
    
  database:
    connection-pool:
      maximum: 20
      minimum: 5
      
  notifications:
    sms:
      enabled: true
      provider: "Twilio"
    email:
      enabled: true
      smtp: "smtp.hdfc.com"

# Usage in Banking Service
@Service
public class BankingService {
    
    @Value("${banking.transaction.daily-limit}")
    private double dailyLimit;
    
    public boolean isTransactionAllowed(double amount) {
        return amount <= dailyLimit;
    }
}
```

### üöó E-commerce Application

```properties
# application.properties
# E-commerce Platform Settings

# Store Configuration
store.name=FlipBuy
store.currency=INR
store.timezone=Asia/Kolkata

# Payment Gateway
payment.razorpay.key=${RAZORPAY_KEY}
payment.razorpay.secret=${RAZORPAY_SECRET}
payment.cod.enabled=true
payment.cod.limit=5000

# Inventory Management  
inventory.low-stock-alert=10
inventory.auto-reorder=true
inventory.warehouse.locations=Mumbai,Delhi,Bangalore

# Shipping
shipping.free-delivery-threshold=499
shipping.same-day.cities=Mumbai,Delhi
shipping.default-partner=BlueDart
```

---

## 6. Comparison Tables üìä

### Properties vs YAML - Side by Side

| Feature | application.properties | application.yml |
|---------|----------------------|-----------------|
| **Readability** | ‚ùå Less readable for nested | ‚úÖ Highly readable |
| **File Size** | ‚úÖ Smaller file size | ‚ùå Larger due to formatting |
| **Hierarchy** | ‚ùå Flat structure | ‚úÖ Tree structure |
| **Comments** | ‚úÖ `# comments` | ‚úÖ `# comments` |
| **Lists** | ‚ùå Complex: `app.items[0]=item1` | ‚úÖ Simple YAML arrays |
| **IDE Support** | ‚úÖ Universal support | ‚úÖ Good support |
| **Learning Curve** | ‚úÖ Easy to learn | ‚ùå YAML syntax learning needed |

### Same Configuration - Both Formats

| Properties Format | YAML Format |
|------------------|-------------|
| ```properties<br/>spring.datasource.url=jdbc:mysql://localhost:3306/db<br/>spring.datasource.username=root<br/>spring.datasource.password=secret<br/>spring.jpa.hibernate.ddl-auto=update<br/>spring.jpa.show-sql=true``` | ```yaml<br/>spring:<br/>  datasource:<br/>    url: jdbc:mysql://localhost:3306/db<br/>    username: root<br/>    password: secret<br/>  jpa:<br/>    hibernate:<br/>      ddl-auto: update<br/>    show-sql: true``` |

---

## 7. Interview Questions üéØ

### Q1: What's the difference between application.properties and application.yml?

**Answer:**
```java
// Both serve same purpose but different syntax:

// Properties - Flat key-value pairs
server.port=8080
spring.datasource.url=jdbc:mysql://localhost/db

// YAML - Hierarchical structure  
server:
  port: 8080
spring:
  datasource:
    url: jdbc:mysql://localhost/db

// Key differences:
// 1. YAML more readable for complex configurations
// 2. Properties smaller file size
// 3. YAML supports complex data types naturally
// 4. Both support profiles and placeholders
```

### Q2: How do you handle different environments (dev, prod, test)?

**Answer:**
```java
// Profile-specific files:
// application-dev.yml
// application-prod.yml  
// application-test.yml

// Activate profile:
// 1. In main application.yml
spring:
  profiles:
    active: dev

// 2. Command line
java -jar app.jar --spring.profiles.active=prod

// 3. Environment variable
export SPRING_PROFILES_ACTIVE=prod

// 4. IDE configuration
@ActiveProfiles("test")  // For testing
```

### Q3: How to externalize sensitive data like passwords?

**Answer:**
```yaml
# Don't do this ‚ùå
spring:
  datasource:
    password: myactualpassword

# Do this instead ‚úÖ
spring:
  datasource:
    password: ${DB_PASSWORD:defaultpass}

# Environment variables:
export DB_PASSWORD=myactualpassword

# Or use external config server
# Or use encrypted properties with jasypt
```

### Q4: Configuration loading order in Spring Boot?

**Answer:**
```java
// Loading Priority (High to Low):
// 1. Command line arguments
java -jar app.jar --server.port=9090

// 2. Java System Properties  
System.setProperty("server.port", "9090");

// 3. OS environment variables
export SERVER_PORT=9090

// 4. Profile-specific application properties
// application-{profile}.properties

// 5. Application properties (application.properties)

// 6. @PropertySource annotations

// 7. Default properties
```

---

## 8. Common Mistakes üö´

### Mistake 1: YAML Indentation Issues ‚ùå

```yaml
# Wrong - Mixed indentation ‚ùå
spring:
  datasource:
      url: jdbc:mysql://localhost/db    # 4 spaces
    username: root                      # 2 spaces  
      password: secret                  # 4 spaces

# Correct ‚úÖ  
spring:
  datasource:
    url: jdbc:mysql://localhost/db      # 2 spaces
    username: root                      # 2 spaces
    password: secret                    # 2 spaces
```

**Error Message:**
```bash
Error parsing YAML: mapping values are not allowed here
```

### Mistake 2: Properties File Spaces ‚ùå

```properties
# Wrong ‚ùå
server.port = 8080
database.name = myapp

# Correct ‚úÖ
server.port=8080
database.name=myapp
```

### Mistake 3: Case Sensitivity Confusion ‚ùå

```java
// Properties file
app.userName=john

// Wrong access ‚ùå
@Value("${app.username}")  // Different case!
private String userName;

// Correct access ‚úÖ
@Value("${app.userName}")
private String userName;
```

### Mistake 4: Profile File Naming ‚ùå

```bash
# Wrong file names ‚ùå
application_dev.yml
application.dev.yml
applicationDev.yml

# Correct naming ‚úÖ
application-dev.yml
application-prod.yml
application-test.yml
```

---

## 9. Best Practices üèÜ

### 1. **Organization & Structure** üìÅ

```yaml
# Group related properties together
# application.yml
server:
  port: 8080
  servlet:
    context-path: /api

# Database configs together  
spring:
  datasource:
    url: ${DB_URL:jdbc:mysql://localhost:3306/mydb}
    username: ${DB_USER:root}
    password: ${DB_PASSWORD:password}
  
  jpa:
    hibernate:
      ddl-auto: ${DDL_AUTO:update}
    show-sql: ${SHOW_SQL:false}

# Custom app configs together
app:
  name: MyApplication
  version: 1.0.0
  features:
    email-enabled: true
    sms-enabled: false
```

### 2. **Use Environment Variables for Secrets** üîê

```yaml
# Good practice ‚úÖ
spring:
  datasource:
    password: ${DATABASE_PASSWORD}
  
# Bad practice ‚ùå  
spring:
  datasource:
    password: mysecretpassword123
```

### 3. **Meaningful Property Names** üìù

```properties
# Bad ‚ùå
app.x=true
app.val1=100
app.str=something

# Good ‚úÖ
app.email-notifications.enabled=true
app.transaction.daily-limit=100000
app.security.jwt.expiration-hours=24
```

### 4. **Documentation with Comments** üìö

```yaml
# Application Configuration
# Last updated: March 2024
# Author: Development Team

app:
  # Feature toggles - can be changed without deployment
  features:
    new-dashboard: true      # Enable new UI dashboard
    beta-payment: false      # Beta payment gateway integration
    
  # Performance settings - monitor after changes  
  cache:
    ttl: 3600               # Cache time-to-live in seconds
    max-size: 1000          # Maximum cache entries
```

### 5. **Profile-Specific Configurations** üéØ

```yaml
# application.yml (common settings)
app:
  name: MyApp
  
spring:
  jpa:
    hibernate:
      ddl-auto: validate

---
# application-dev.yml (development overrides)
spring:
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
  h2:
    console:
      enabled: true

logging:
  level:
    com.myapp: DEBUG

---  
# application-prod.yml (production overrides)
spring:
  jpa:
    hibernate:
      ddl-auto: none
    show-sql: false

logging:
  level:
    com.myapp: WARN
    org.springframework: ERROR
```

---

## 10. Summary/Quick Recap üéØ

### Key Takeaways üîë

| Concept | Properties | YAML | Remember This |
|---------|------------|------|---------------|
| **Format** | `key=value` | `key: value` | YAML needs space after colon |
| **Hierarchy** | `parent.child=value` | Indented structure | YAML more readable for nested |
| **Comments** | `# comment` | `# comment` | Both support same comment style |
| **Lists** | `app.items[0]=item1` | YAML arrays | YAML simpler for lists |
| **Best For** | Simple configs | Complex configs | Choose based on complexity |

### Memory Tricks üß†

**Yaad rakhne ka mantra:**
- **Properties** = **P**lain **P**airs (simple key=value)
- **YAML** = **Y**et **A**nother **M**arkup **L**anguage (fancy structure)
- **Indentation** in YAML = **I**mportant **N**ot **D**isrupted **E**ver
- **Environment variables** = **E**xternal **S**ecrets **S**afe

### When to Use What ü§î

```java
// Use application.properties when:
‚úÖ Simple, flat configuration
‚úÖ Team not familiar with YAML  
‚úÖ Minimal nested properties
‚úÖ Legacy project requirements

// Use application.yml when:
‚úÖ Complex, hierarchical config
‚úÖ Multiple environments/profiles
‚úÖ Lists and arrays needed
‚úÖ Better readability required
‚úÖ Modern Spring Boot projects
```

### Quick Commands üíª

```bash
# Run with specific profile
java -jar myapp.jar --spring.profiles.active=prod

# Override property from command line
java -jar myapp.jar --server.port=9090

# Set environment variable (Linux/Mac)
export SPRING_PROFILES_ACTIVE=dev

# Set environment variable (Windows)
set SPRING_PROFILES_ACTIVE=dev

# Check active configuration
curl http://localhost:8080/actuator/configprops
```

---

### üéâ Final Words

**Bhai yaar**, configuration files tumhare Spring Boot application ki **soul** hain! Properly configure karo, aur tumhara app different environments mein seamlessly run karega. 

**Remember:** 
- **Start simple** with properties
- **Graduate to YAML** for complex apps  
- **Never hardcode secrets**
- **Use profiles** for different environments
- **Document everything** for team members

**Happy Coding! üöÄ**

---

> üí° **Pro Tip:** Always keep a backup of working configurations before making major changes. Git commit karna mat bhoolna!
